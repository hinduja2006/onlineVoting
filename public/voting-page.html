<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Voting System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap');
        
        :root {
            --tdp-color: #ffcc00;
            --ycp-color: #1359a4;
            --jsp-color: #ffffff;
            --bjp-color: #ff9933;
            --nota-color: #e74c3c;
            --primary-color: #2ecc71;
            --secondary-color: #3498db;
            --dark-color: #2c3e50;
            --light-color: #ecf0f1;
            --accent-color: #9b59b6;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --error-color: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #172943 0%, #04142d 100%);
            background-size: cover;
            min-height: 100vh;
            padding: 40px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('/api/placeholder/100/100');
            background-size: 200px;
            opacity: 0.05;
            pointer-events: none;
            z-index: -1;
        }
        
        .container {
            max-width: 850px;
            width: 100%;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
            margin: 0 auto;
            border-top: 5px solid var(--primary-color);
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.8s ease-out;
        }
        
        .container.disabled-voting {
            opacity: 0.7;
        }
        
        .container.disabled-voting::after {
            content: 'You have already voted';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--success-color);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: bold;
            z-index: 10;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            opacity: 0.3;
        }
        
        .container::after {
            content: '';
            position: absolute;
            bottom: -30px;
            left: -30px;
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--accent-color), var(--secondary-color));
            border-radius: 50%;
            opacity: 0.2;
        }
        
        h2 {
            text-align: center;
            color: var(--dark-color);
            margin-bottom: 30px;
            font-size: 2.5rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            padding-bottom: 15px;
            font-family: 'Montserrat', sans-serif;
        }
        
        h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 4px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color), var(--accent-color));
            border-radius: 4px;
        }
        
        .form-group {
            margin-bottom: 28px;
            position: relative;
            animation: fadeIn 0.6s ease-out forwards;
            opacity: 0;
        }
        
        .form-group:nth-child(1) {
            animation-delay: 0.3s;
        }
        
        .form-group:nth-child(2) {
            animation-delay: 0.5s;
        }
        
        label {
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
            color: var(--dark-color);
            font-size: 1.1rem;
            transition: all 0.3s ease;
            position: relative;
            padding-left: 12px;
        }
        
        label::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 14px;
            background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }
        
        select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
            background-color: #f9f9f9;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%232c3e50' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 16px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.05);
        }
        
        select:disabled {
            background-color: #f0f0f0;
            color: #888;
        }
        
        select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(46, 204, 113, 0.2);
            background-color: #ffffff;
        }
        
        .form-group:hover label {
            color: var(--primary-color);
        }
        
        .mla-list {
            margin-top: 35px;
            animation: fadeIn 0.6s ease-out forwards;
            opacity: 0;
            animation-delay: 0.7s;
        }
        
        .mla-list-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 20px;
            text-align: center;
            position: relative;
            font-family: 'Montserrat', sans-serif;
        }
        
        .mla-list-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--primary-color);
            border-radius: 2px;
        }
        
        .selection-info {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 0.95rem;
            font-style: italic;
        }
        
        .mla-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .mla-item {
            background-color: #fff;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid #eee;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            animation: fadeInUp 0.6s ease-out forwards;
            opacity: 0;
        }
        
        .mla-item.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .mla-item:nth-child(1) { animation-delay: 0.1s; }
        .mla-item:nth-child(2) { animation-delay: 0.2s; }
        .mla-item:nth-child(3) { animation-delay: 0.3s; }
        .mla-item:nth-child(4) { animation-delay: 0.4s; }
        .mla-item:nth-child(5) { animation-delay: 0.5s; }
        
        .mla-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color));
            opacity: 0;
            transition: all 0.3s ease;
        }
        
        .mla-item:hover:not(.disabled) {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 22px rgba(0, 0, 0, 0.09);
            border-color: #d4d4d4;
        }
        
        .mla-item:hover:not(.disabled)::before {
            opacity: 1;
        }
        
        .mla-item.selected {
            border-color: var(--primary-color);
            background-color: rgba(46, 204, 113, 0.08);
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.2);
        }
        
        .mla-item.selected::before {
            opacity: 1;
            width: 8px;
        }
        
        .mla-item.selected::after {
            content: '✓';
            position: absolute;
            top: 15px;
            right: 15px;
            width: 25px;
            height: 25px;
            background: var(--success-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            animation: scaleIn 0.3s ease-out;
        }
        
        .mla-item input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }
        
        .mla-info {
            display: flex;
            align-items: center;
        }
        
        .party-symbol {
            position: relative;
            width: 60px;
            height: 60px;
            margin-right: 18px;
            border-radius: 50%;
            background-color: #f5f5f5;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .mla-item:hover:not(.disabled) .party-symbol {
            transform: scale(1.1);
        }
        
        .mla-item.selected .party-symbol {
            background-color: rgba(46, 204, 113, 0.1);
        }
        
        .party-symbol img {
            width: 45px;
            height: 45px;
            object-fit: contain;
            transition: all 0.3s ease;
        }
        
        .mla-details {
            flex-grow: 1;
        }
        
        .mla-name {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 5px;
            font-size: 1.05rem;
            transition: all 0.3s ease;
        }
        
        .mla-item:hover:not(.disabled) .mla-name {
            color: var(--primary-color);
        }
        
        .mla-party {
            font-size: 0.9rem;
            color: #666;
            display: flex;
            align-items: center;
            position: relative;
        }
        
        .mla-party::before {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
            display: inline-block;
        }
        
        .party-TDP .mla-party::before {
            background-color: var(--tdp-color);
            box-shadow: 0 0 5px rgba(255, 204, 0, 0.6);
        }
        
        .party-YCP .mla-party::before,
        .party-YSRCP .mla-party::before {
            background-color: var(--ycp-color);
            box-shadow: 0 0 5px rgba(19, 89, 164, 0.6);
        }
        
        .party-JSP .mla-party::before {
            background-color: #fff;
            border: 1px solid #ddd;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }
        
        .party-BJP .mla-party::before {
            background-color: var(--bjp-color);
            box-shadow: 0 0 5px rgba(255, 153, 51, 0.6);
        }
        
        .party-NOTA .mla-party::before {
            background-color: var(--nota-color);
            box-shadow: 0 0 5px rgba(231, 76, 60, 0.6);
        }
        
        .vote-btn {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 14px 28px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.4s ease;
            display: block;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-top: 40px;
            box-shadow: 0 8px 20px rgba(46, 204, 113, 0.3);
            position: relative;
            overflow: hidden;
            animation: fadeIn 0.6s ease-out forwards;
            opacity: 0;
            animation-delay: 0.9s;
            z-index: 1;
        }
        
        .vote-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        .vote-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.6s ease;
            z-index: -1;
        }
        
        .vote-btn:hover:not(:disabled) {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(46, 204, 113, 0.4);
            letter-spacing: 2px;
        }
        
        .vote-btn:hover:not(:disabled)::before {
            left: 100%;
        }
        
        .vote-btn:active:not(:disabled) {
            transform: translateY(0);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }
        
        /* State indicator dots */
        .status-indicator {
            position: absolute;
            top: 40px;
            right: 40px;
            display: flex;
            align-items: center;
            opacity: 0.7;
            animation: fadeIn 1s ease-out forwards;
            animation-delay: 1.2s;
            opacity: 0;
        }
        
        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--success-color);
            margin-right: 8px;
            position: relative;
        }
        
        .status-dot::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background-color: var(--success-color);
            animation: pulse 1.5s infinite;
        }
        
        .status-text {
            font-size: 0.85rem;
            color: var(--dark-color);
            font-weight: 500;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 0.85rem;
            color: #777;
            animation: fadeIn 0.6s ease-out forwards;
            opacity: 0;
            animation-delay: 1s;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes scaleIn {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.5);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 0;
            }
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #fff;
            border-radius: 8px;
            padding: 15px 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            max-width: 350px;
            z-index: 9999;
            transform: translateX(400px);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast-icon {
            width: 24px;
            height: 24px;
            margin-right: 15px;
            background-color: var(--success-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }
        
        .toast-content {
            flex: 1;
        }
        
        .toast-title {
            font-weight: 600;
            margin-bottom: 3px;
            font-size: 1rem;
            color: var(--dark-color);
        }
        
        .toast-message {
            font-size: 0.9rem;
            color: #666;
        }
        
        /* Voting Success Animation */
        .voting-success {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255,255,255,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            flex-direction: column;
        }
        
        .voting-success.show {
            opacity: 1;
            visibility: visible;
        }
        
        .success-checkmark {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--success-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 40px;
            margin-bottom: 20px;
            transform: scale(0);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .voting-success.show .success-checkmark {
            transform: scale(1);
        }
        
        .success-message {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 15px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            transition-delay: 0.3s;
        }
        
        .voting-success.show .success-message {
            opacity: 1;
            transform: translateY(0);
        }
        
        .success-details {
            font-size: 1.1rem;
            color: #666;
            text-align: center;
            max-width: 500px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            transition-delay: 0.5s;
        }
        
        .voting-success.show .success-details {
            opacity: 1;
            transform: translateY(0);
        }
        
        .done-btn {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 25px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            transition-delay: 0.7s;
        }
        
        .voting-success.show .done-btn {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Party-specific styling */
        .party-TDP .party-symbol {
            background-color: rgba(255, 204, 0, 0.1);
        }
        
        .party-YCP .party-symbol,
        .party-YSRCP .party-symbol {
            background-color: rgba(19, 89, 164, 0.1);
        }
        
        .party-JSP .party-symbol {
            background-color: rgba(255, 255, 255, 0.8);
        }
        
        .party-BJP .party-symbol {
            background-color: rgba(255, 153, 51, 0.1);
        }
        
        .party-NOTA .party-symbol {
            background-color: rgba(231, 76, 60, 0.1);
        }
        
        /* Loading indicator when changing districts/constituencies */
        .loading {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255,255,255,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .loading.show {
            opacity: 1;
            visibility: visible;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(46, 204, 113, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Results button */
        .results-btn {
            background: linear-gradient(45deg, var(--accent-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            display: block;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .results-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(155, 89, 182, 0.3);
        }
        
        /* Results modal */
        .results-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .results-modal.show {
            opacity: 1;
            visibility: visible;
        }
        
        .results-content {
            background-color: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            transform: translateY(50px);
            transition: all 0.3s ease;
        }
        
        .results-modal.show .results-content {
            transform: translateY(0);
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .results-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark-color);
        }
        
        .close-results {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
            transition: all 0.3s ease;
        }
        
        .close-results:hover {
            color: var(--error-color);
            transform: rotate(90deg);
        }
        
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .results-table th {
            background-color: var(--light-color);
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .results-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }
        
        .results-table tr:last-child td {
            border-bottom: none;
        }
        
        .party-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            color: white;
        }
        
        .badge-tdp {
            background-color: var(--tdp-color);
        }
        
        .badge-ycp {
            background-color: var(--ycp-color);
        }
        
        .badge-jsp {
            background-color: var(--dark-color);
            color: white;
        }
        
        .badge-bjp {
            background-color: var(--bjp-color);
        }
        
        .badge-nota {
            background-color: var(--nota-color);
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 25px;
                border-radius: 15px;
            }
            
            h2 {
                font-size: 1.8rem;
                margin-bottom: 25px;
            }
            
            .mla-grid {
                grid-template-columns: 1fr;
            }
            
            .status-indicator {
                top: 25px;
                right: 25px;
            }
            
            .vote-btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
            
            .voting-success .success-message {
                font-size: 1.5rem;
            }
            
            .voting-success .success-details {
                font-size: 1rem;
                padding: 0 20px;
            }
            
            .results-content {
                padding: 20px;
            }
            
            .results-title {
                font-size: 1.3rem;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 15px;
            }
            
            .container {
                padding: 20px;
            }
            
            h2 {
                font-size: 1.6rem;
            }
            
            .party-symbol {
                width: 50px;
                height: 50px;
            }
            
            .party-symbol img {
                width: 35px;
                height: 35px;
            }
            
            .mla-name {
                font-size: 1rem;
            }
            
            .results-table th, 
            .results-table td {
                padding: 8px 10px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container" id="voting-container">
        <div class="status-indicator">
            <div class="status-dot"></div>
            <div class="status-text">LIVE</div>
        </div>
        
        <h2>Online Voting System</h2>

        <div class="form-group">
            <label for="district">Select District:</label>
            <select id="district" onchange="loadConstituencies()">
                <option value="">-- Select District --</option>
                <option value="Srikakulam">Srikakulam</option>
                <option value="Vijayanagaram">Vijayanagaram</option>
                <option value="Visakhapatnam">Visakhapatnam</option>
                <option value="East Godavari">East Godavari</option>
                <option value="West Godavari">West Godavari</option>
                <option value="Krishna">Krishna</option>
                <option value="Guntur">Guntur</option>
                <option value="Prakasam">Prakasam</option>
                <option value="Nellore">Nellore</option>
                <option value="Chittoor">Chittoor</option>
                <option value="Kadapa">Kadapa</option>
                <option value="Anantapur">Anantapur</option>
                <option value="Kurnool">Kurnool</option>
            </select>
        </div>

        <div class="form-group">
            <label for="constituency">Select Constituency:</label>
            <select id="constituency" onchange="loadMLAs()">
                <option value="">-- Select Constituency --</option>
            </select>
        </div>

        <div class="mla-list" id="mla-list" style="display: none;">
            <div class="mla-list-title">Select Your Candidate</div>
            <div class="selection-info">Click on a candidate to select your vote</div>
            <div class="mla-grid" id="mla-grid"></div>
        </div>

        <button class="vote-btn" id="vote-btn" onclick="submitVote()">
            <span>Submit Vote</span>
        </button>
        
        <button class="results-btn" id="results-btn" onclick="showResults()">
            View Results
        </button>
        
        <div class="footer">
            Secure E-Voting Platform | © 2025 Electoral Commission
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
        </div>
    </div>
    
    <div class="toast" id="toast">
        <div class="toast-icon">✓</div>
        <div class="toast-content">
            <div class="toast-title">Success</div>
            <div class="toast-message" id="toast-message">Action completed successfully</div>
        </div>
    </div>
    
    <div class="voting-success" id="voting-success">
        <div class="success-checkmark">✓</div>
        <div class="success-message">Vote Submitted!</div>
        <div class="success-details" id="success-details">
            Thank you for participating in the democratic process. Your vote has been recorded.
        </div>
        <button class="done-btn" onclick="closeSuccessMessage()">Done</button>
    </div>
    
    <!-- Results Modal -->
    <div class="results-modal" id="results-modal">
        <div class="results-content">
            <div class="results-header">
                <h3 class="results-title">Election Results</h3>
                <button class="close-results" onclick="closeResults()">&times;</button>
            </div>
            
            <div id="results-container">
                <p>Select a constituency to view results</p>
            </div>
        </div>
    </div>
    <script>
        // Party symbols as image paths
        const partySymbols = {
            "TDP": "./images/tdp.jpg",
            "YCP": "./images/ysr.jpg",
            "JSP": "./images/jsp.jpg",
            "BJP":"./images/bjp.jpg",
            "NOTA":"./images/nota.jpg"
        };

        // Sample MLA data for all districts and constituencies
        const mlaData = {
            
  "Srikakulam": {
    "Ichchapuram": [
      { "name": "Piriya Vijaya", "party": "YCP" },
      { "name": "Bendalam Ashok", "party": "TDP" },
      { "name": "Masupatri Chakravarthy Reddy", "party": "BJP" },
      { "name": "None of the Above", "party": "NOTA" }
    ],
    "Palasa": [
      { "name": "Seediri Appalaraju", "party": "TDP" },
      { "name": "Gouthu Sireesha", "party": "YCP" },
      { "name": "Majji Trinadh Babu", "party": "BJP" },
      { "name": "None of the Above", "party": "NOTA" }
    ],
    "Tekkali": [
      { "name": "Duvvada Srinivas", "party": "TDP" },
      { "name": "Kinjarapu Atchannaidu", "party": "YCP" },
      { "name": "Killi Kruparani", "party": "BJP" },
      { "name": "None of the Above", "party": "NOTA" }
    ],
    "Pathapatnam": [
      { "name": "Reddy Shanthi", "party": "TDP" },
      { "name": "Mamidi Govinda Rao", "party": "YCP" },
      { "name": "Koppurothu Venkata Rao", "party": "BJP" },
      { "name": "None of the Above", "party": "NOTA" }
    ],
    "Srikakulam": [
      { "name": "Dharmana Prasada Rao", "party": "TDP" },
      { "name": "Gondu Shankar", "party": "YCP" },
      { "name": "Ambati Krishna Rao", "party": "BJP" },
      { "name": "None of the Above", "party": "NOTA" }
    ],
    "Amadalavalasa": [
      { "name": "Thammineni Seetharam", "party": "TDP" },
      { "name": "Koona Ravi Kumar", "party": "YCP" },
      { "name": "Sannapala Annajirao", "party": "BJP" },
      { "name": "None of the Above", "party": "NOTA" }
    ],
    "Etcherla": [
      { "name": "Gorle Kiran Kumar", "party": "TDP" },
      { "name": "Nadikuditi Eswara Rao", "party": "YCP" },
      { "name": "Karimajji Malleswar Rao", "party": "BJP" },
      { "name": "None of the Above", "party": "NOTA" }
    ],
    "Narasannapeta": [
      { "name": "Dharmana Krishna Das", "party": "TDP" },
      { "name": "Baggu Ramana Murthy", "party": "YCP" },
      { "name": "Mantri Narasimha Murthy", "party": "BJP" },
      { "name": "None of the Above", "party": "NOTA" }
    ]
  },

  "Visakhapatnam": {
                "Visakhapatnam North": [
                    { name: "Ganta Srinivasa Rao", party: "TDP" },
                    { name: "Muttamsetti Srinivasa Rao", party: "YCP" },
                    { name: "P.Joseph", party: "JSP" },
                    { name: "S.Bhaskar Rao", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Anakapalle": [
                    { name: "A.SattiRaju", party: "TDP" },
                    { name: "Bharath Kumar", party: "YCP" },
                    { name: "K.Satyanarayana", party: "JSP" },
                    { name: "K.Ramakrishna", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Araku": [
                    { name: "C.RajaBabu", party: "TDP" },
                    { name: "R.Matyalingam", party: "YCP" },
                    { name: "N.Madhu Babu", party: "JSP" },
                    { name: "D.RajaRao", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Bhimili": [
                    { name: "Ganta Srinivasa Rao", party: "TDP" },
                    { name: "M.Srinivasa rao", party: "YCP" },
                    { name: "N.Sandhya", party: "JSP" },
                    { name: "N.Nagamani", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Chodavaram": [
                    { name: "K.N.Raju", party: "TDP" },
                    { name: "K.DharmaSri", party: "YCP" },
                    { name: "V.Raju", party: "JSP" },
                    { name: "S.Ganesh", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Gajuwaka": [
                    { name: "P.Srinivas rao", party: "TDP" },
                    { name: "A.Amarnath Gudivada", party: "YCP" },
                    { name: "K.Krishna", party: "JSP" },
                    { name: "S.Sarah Jyothi", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Madugula": [
                    { name: "B.Satyanarayana", party: "TDP" },
                    { name: "E.Anuradha", party: "YCP" },
                    { name: "K.Tirupathi Rao", party: "JSP" },
                    { name: "L.Eswar Rao", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Narsipatnam": [
                    { name: "C.AyyanaPatrudu", party: "TDP" },
                    { name: "U.Ganesh", party: "YCP" },
                    { name: "B.Nagaraju", party: "JSP" },
                    { name: "K.ChandraMouli", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Pendurthi": [
                    { name: "E.Venkata ramana", party: "TDP" },
                    { name: "A.Adeep Raj", party: "YCP" },
                    { name: "E.Roja", party: "JSP" },
                    { name: "P.Ramesh babu", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Yelamanchili": [
                    { name: "B.Nageswararao", party: "TDP" },
                    { name: "V.V.R.Murthy", party: "YCP" },
                    { name: "S.Vijay Kumar", party: "JSP" },
                    { name: "J.Srinivasa Rao", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ]
            },

           "Guntur": {
    "Guntur West": [
        { "name": "M. V. S. S. Reddy", "party": "YCP" },
        { "name": "K. K. N. Raju", "party": "TDP" },
        { "name": "V. Satish", "party": "JSP" },
        { "name": "P. Satya", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Guntur East": [
        { "name": "K. K. V. Raju", "party": "YCP" },
        { "name": "S. Ramakrishna Reddy", "party": "TDP" },
        { "name": "M. K. Srinivas", "party": "JSP" },
        { "name": "R. Sathya", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Tenali": [
        { "name": "G. Veeramani", "party": "YCP" },
        { "name": "M. Krishna Rao", "party": "TDP" },
        { "name": "S. Srinivas", "party": "JSP" },
        { "name": "K. Mohan", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Ponnur": [
        { "name": "P. Srinivas", "party": "YCP" },
        { "name": "S. Madhusudhan", "party": "TDP" },
        { "name": "K. Venkat Reddy", "party": "JSP" },
        { "name": "N. Raghunath", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Bapatla": [
        { "name": "A. S. Reddy", "party": "YCP" },
        { "name": "V. Raghunathan", "party": "TDP" },
        { "name": "B. Lakshmi", "party": "JSP" },
        { "name": "M. Raju", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Repalle": [
        { "name": "R. G. Chandra", "party": "YCP" },
        { "name": "V. Surya", "party": "TDP" },
        { "name": "S. Manohar", "party": "JSP" },
        { "name": "P. Ramana", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Macherla": [
        { "name": "N. Manohar", "party": "YCP" },
        { "name": "K. R. S. Reddy", "party": "TDP" },
        { "name": "M. S. Pratap", "party": "JSP" },
        { "name": "T. Bharathi", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Piedapalli": [
        { "name": "R. Chandra Mohan", "party": "YCP" },
        { "name": "V. R. Satish", "party": "TDP" },
        { "name": "B. Arvind", "party": "JSP" },
        { "name": "M. Jyothi", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ]
},
            "East Godavari": {
    "Rajahmundry Urban": [
        { "name": "Adireddy Bhavani", "party": "TDP" },
        { "name": "Routhu Suryaprakasa Rao", "party": "YCP" },
        { "name": "Jakkampudi Ganesh", "party": "JSP" },
        { "name": "S.V. Suryanarayana", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Rajahmundry Rural": [
        { "name": "Bommana Raj Kumar", "party": "TDP" },
        { "name": "G. Srinivas Naidu", "party": "YCP" },
        { "name": "M. Mahesh", "party": "JSP" },
        { "name": "S. Anuradha", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Kakinada Rural": [
        { "name": "Pilli Anantha Lakshmi", "party": "TDP" },
        { "name": "Kurasala Kannababu", "party": "YCP" },
        { "name": "B. Laxmi Narayana", "party": "JSP" },
        { "name": "M. Venkatesh", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Kakinada Urban": [
        { "name": "Dwarampudi Chandrasekhar Reddy", "party": "TDP" },
        { "name": "Sattibabu Ramaraju", "party": "YCP" },
        { "name": "K. Surya Teja", "party": "JSP" },
        { "name": "G. Subbarao", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Amalapuram": [
        { "name": "A. Ram Mohan", "party": "TDP" },
        { "name": "S. Appalanaidu", "party": "YCP" },
        { "name": "D. Ramesh", "party": "JSP" },
        { "name": "J. Jyothi", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Mandapeta": [
        { "name": "Kandula Durgesh", "party": "TDP" },
        { "name": "T. Venkata Rao", "party": "YCP" },
        { "name": "A. Kishore", "party": "JSP" },
        { "name": "K. Harinath", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Rajanagaram": [
        { "name": "Jakkampudi Raja", "party": "TDP" },
        { "name": "P. Srinivas", "party": "YCP" },
        { "name": "V. Lakshman", "party": "JSP" },
        { "name": "M. Nagaraju", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Peddapuram": [
        { "name": "Nimmakayala Chinarajappa", "party": "TDP" },
        { "name": "G. Govind", "party": "YCP" },
        { "name": "T. Surya Rao", "party": "JSP" },
        { "name": "K. Pavani", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Tuni": [
        { "name": "Dadisetti Raja", "party": "TDP" },
        { "name": "K. Anji Reddy", "party": "YCP" },
        { "name": "P. Sekhar", "party": "JSP" },
        { "name": "D. Swathi", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Ramachandrapuram": [
        { "name": "Thota Trimurthulu", "party": "TDP" },
        { "name": "P. Venu Gopal", "party": "YCP" },
        { "name": "S. Suresh", "party": "JSP" },
        { "name": "R. Nagamani", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ]
},
"West Godavari": {
    "Eluru": [
        { "name": "Badeti Bujji", "party": "TDP" },
        { "name": "Alla Kali Krishna Srinivas (Nani)", "party": "YCP" },
        { "name": "G. Srinivasa Rao", "party": "JSP" },
        { "name": "P. Rajeswari", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Tadepalligudem": [
        { "name": "E. Sesha Reddy", "party": "TDP" },
        { "name": "Kottu Satyanarayana", "party": "YCP" },
        { "name": "A. Nagesh", "party": "JSP" },
        { "name": "B. Radhika", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Tanuku": [
        { "name": "Arimilli Radha Krishna", "party": "TDP" },
        { "name": "K. S. Raju", "party": "YCP" },
        { "name": "D. Praveen", "party": "JSP" },
        { "name": "M. Kavitha", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Palakollu": [
        { "name": "Dr. Nimmala Ramanaidu", "party": "TDP" },
        { "name": "K. S. Raju", "party": "YCP" },
        { "name": "B. Mahesh", "party": "JSP" },
        { "name": "S. Swapna", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Narsapuram": [
        { "name": "Bandaru Madhava Naidu", "party": "TDP" },
        { "name": "M. Prasad Raju", "party": "YCP" },
        { "name": "K. Venkatesh", "party": "JSP" },
        { "name": "T. Padmavathi", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Achanta": [
        { "name": "Pydikondala Manikyala Rao", "party": "TDP" },
        { "name": "Cherukuvada Sri Ranganadha Raju", "party": "YCP" },
        { "name": "S. Krishna Rao", "party": "JSP" },
        { "name": "Y. Padma", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Undi": [
        { "name": "Kalavapudi Siva", "party": "TDP" },
        { "name": "K. Ramanjaneyulu", "party": "YCP" },
        { "name": "B. Suresh", "party": "JSP" },
        { "name": "V. Renuka", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Bhimavaram": [
        { "name": "Grandhi Srinivas", "party": "TDP" },
        { "name": "K. Vijaya Kumar", "party": "YCP" },
        { "name": "T. Phani Kumar", "party": "JSP" },
        { "name": "J. Deepika", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ]
},
"Krishna": {
    "Vijayawada East": [
        { "name": "Gadde Rammohan", "party": "TDP" },
        { "name": "Boppana Bhava Kumar", "party": "YCP" },
        { "name": "M. Ravindra", "party": "JSP" },
        { "name": "R. Anjali", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Vijayawada West": [
        { "name": "Jaleel Khan", "party": "TDP" },
        { "name": "Velampalli Srinivas", "party": "YCP" },
        { "name": "K. Ramu", "party": "JSP" },
        { "name": "P. Santhoshini", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Vijayawada Central": [
        { "name": "Malladi Vishnu", "party": "YCP" },
        { "name": "Bonda Uma Maheswara Rao", "party": "TDP" },
        { "name": "S. Kishore", "party": "JSP" },
        { "name": "K. Roja", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Machilipatnam": [
        { "name": "Perni Venkataramaiah (Nani)", "party": "YCP" },
        { "name": "Tenneti Vanitha", "party": "TDP" },
        { "name": "A. Chandra Sekhar", "party": "JSP" },
        { "name": "D. Lavanya", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Pedana": [
        { "name": "Jogi Ramesh", "party": "YCP" },
        { "name": "Kandregula Babji", "party": "TDP" },
        { "name": "S. Vamsi Krishna", "party": "JSP" },
        { "name": "N. Surekha", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Pamarru": [
        { "name": "Anil Kumar", "party": "YCP" },
        { "name": "Uppuleti Kalpana", "party": "TDP" },
        { "name": "Ch. Bhanu", "party": "JSP" },
        { "name": "M. Neelima", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Gannavaram": [
        { "name": "Dr. Vallabhaneni Vamsi", "party": "YCP" },
        { "name": "Yarlagadda Venkat Rao", "party": "TDP" },
        { "name": "R. Kiran", "party": "JSP" },
        { "name": "S. Madhavi", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Gudivada": [
        { "name": "Kodali Sri Venkateswara Rao (Nani)", "party": "YCP" },
        { "name": "Ravi Venkateswara Rao", "party": "TDP" },
        { "name": "K. Ramesh", "party": "JSP" },
        { "name": "T. Harika", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ]
},
"Anantapur": {
    "Anantapur Urban": [
        { "name": "Anantha Venkatarami Reddy", "party": "YCP" },
        { "name": "V. Prabhakar Chowdary", "party": "TDP" },
        { "name": "S. Bhaskar", "party": "JSP" },
        { "name": "L. Swathi", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Tadipatri": [
        { "name": "Kethireddy Pedda Reddy", "party": "YCP" },
        { "name": "J.C. Pavan Reddy", "party": "TDP" },
        { "name": "B. Ravi", "party": "JSP" },
        { "name": "D. Laxmi", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Guntakal": [
        { "name": "Y. Venkatarama Reddy", "party": "YCP" },
        { "name": "Madhusudhan Gupta", "party": "TDP" },
        { "name": "R. Sandeep", "party": "JSP" },
        { "name": "P. Haritha", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Uravakonda": [
        { "name": "Payyavula Keshav", "party": "TDP" },
        { "name": "Y. Visweswara Reddy", "party": "YCP" },
        { "name": "K. Anji", "party": "JSP" },
        { "name": "N. Lavanya", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Hindupur": [
        { "name": "K. Balakrishna", "party": "TDP" },
        { "name": "G. Anjaneyulu", "party": "YCP" },
        { "name": "T. Sudheer", "party": "JSP" },
        { "name": "R. Meghana", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Kadiri": [
        { "name": "Dr. Pedaballi Venkata Sidda Reddy", "party": "YCP" },
        { "name": "S. Venkatesh", "party": "TDP" },
        { "name": "R. Laxman", "party": "JSP" },
        { "name": "A. Sireesha", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Rayadurg": [
        { "name": "Kapil Mohan Reddy", "party": "YCP" },
        { "name": "Thippeswamy", "party": "TDP" },
        { "name": "B. Mallikarjun", "party": "JSP" },
        { "name": "S. Yamini", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Kalyandurg": [
        { "name": "K. V. Ushashri Charan", "party": "YCP" },
        { "name": "T. Prasad Reddy", "party": "TDP" },
        { "name": "J. Raghava", "party": "JSP" },
        { "name": "V. Swarna", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ]
},
"Chittoor": {
    "Chittoor": [
        { "name": "Arani Srinivasulu", "party": "YCP" },
        { "name": "C.K. Jayachandra Reddy", "party": "TDP" },
        { "name": "M. Venkatesh", "party": "JSP" },
        { "name": "L. Sandhya", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Puthalapattu": [
        { "name": "M.S. Babu", "party": "YCP" },
        { "name": "N. Amarnath Reddy", "party": "TDP" },
        { "name": "P. Kishore", "party": "JSP" },
        { "name": "T. Swetha", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Palamaner": [
        { "name": "N. Amarnath Reddy", "party": "TDP" },
        { "name": "Venkata Ramana", "party": "YCP" },
        { "name": "K. Ramesh", "party": "JSP" },
        { "name": "D. Renuka", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Gangadhara Nellore": [
        { "name": "Narendra Kumar", "party": "YCP" },
        { "name": "K. Pratap Reddy", "party": "TDP" },
        { "name": "J. Mahesh", "party": "JSP" },
        { "name": "B. Lavanya", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Punganur": [
        { "name": "Peddireddy Ramachandra Reddy", "party": "YCP" },
        { "name": "M. Venkatesh Naidu", "party": "TDP" },
        { "name": "K. Vinod", "party": "JSP" },
        { "name": "N. Sruthi", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Madanapalle": [
        { "name": "N. Reddeppa", "party": "YCP" },
        { "name": "R. Rajasekhar", "party": "TDP" },
        { "name": "K. Anil", "party": "JSP" },
        { "name": "J. Harika", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Thamballapalle": [
        { "name": "P. Dwarakanath Reddy", "party": "YCP" },
        { "name": "C. Adinarayana Reddy", "party": "TDP" },
        { "name": "B. Manoj", "party": "JSP" },
        { "name": "S. Geetha", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Nagari": [
        { "name": "R. K. Roja", "party": "YCP" },
        { "name": "Gali Bhanu Prakash", "party": "TDP" },
        { "name": "D. Surya", "party": "JSP" },
        { "name": "K. Tejaswini", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ]
},
"Prakasam": {
    "Ongole": [
        { "name": "Y. V. Subba Reddy", "party": "YCP" },
        { "name": "S. P. Krishna", "party": "TDP" },
        { "name": "K. Suresh", "party": "JSP" },
        { "name": "R. Kumar", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Chirala": [
        { "name": "V. V. Ramana", "party": "YCP" },
        { "name": "K. Anil Kumar", "party": "TDP" },
        { "name": "S. Srinivasa Rao", "party": "JSP" },
        { "name": "M. Ramesh", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Kandukur": [
        { "name": "P. Ramesh", "party": "YCP" },
        { "name": "S. Radhakrishnan", "party": "TDP" },
        { "name": "M. Harish", "party": "JSP" },
        { "name": "N. Siva Kumar", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Yerragondapalem": [
        { "name": "K. V. S. Raju", "party": "YCP" },
        { "name": "R. R. Reddy", "party": "TDP" },
        { "name": "M. S. Ravi", "party": "JSP" },
        { "name": "T. Murali", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Parchur": [
        { "name": "A. G. V. R. Rao", "party": "YCP" },
        { "name": "V. Chandra Sekhar", "party": "TDP" },
        { "name": "K. R. Babu", "party": "JSP" },
        { "name": "R. Krishna", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ]
},
"Vijayanagaram": {
                "Salur": [
                    { name: "K. Appala Naidu", party: "TDP" },
                    { name: "P. Pushpavardhan", party: "YCP" },
                    { name: "M.Ganapathi", party: "JSP" },
                    { name: "K.Ramesh", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Bobbili": [
                    { name: "R.V.S. RangaRao", party: "TDP" },
                    { name: "S.Chinna Appalanaidu", party: "YCP" },
                    { name: "A.Prasanth", party: "JSP" },
                    { name: "M.Vinay", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Cheepurapalli": [
                    { name: "K.VenkataRao", party: "TDP" },
                    { name: "B.Satyanarayana", party: "YCP" },
                    { name: "K.SrinivasaRao", party: "JSP" },
                    { name: "S.Satyanarayana", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Gajapathinagaram": [
                    { name: "K.Srinivas", party: "TDP" },
                    { name: "B.AppalaNarasayya", party: "YCP" },
                    { name: "K.Sandhya", party: "JSP" },
                    { name: "K.Kumaraju", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Nellimarla": [
                    { name: "M.Nagamani", party: "TDP" },
                    { name: "B.Appalanaidu", party: "YCP" },
                    { name: "K.Krishnan", party: "JSP" },
                    { name: "N.Srinu", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
               "Parvathipuram": [
                    { name: "B.VijayaChandu", party: "TDP" },
                    { name: "A.Jogarao", party: "YCP" },
                    { name: "U.Bhanu", party: "JSP" },
                    { name: "G.Jyothi", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "S.Kota": [
                    { name: "K.Lalitha Kumari", party: "TDP" },
                    { name: "K.SrinivasaRao", party: "YCP" },
                    { name: "P.Eswaramma", party: "JSP" },
                    { name: "V.JagannadhaRao", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ],
                "Vijayanagaram": [
                    { name: "A.Gajapathiraju", party: "TDP" },
                    { name: "K.Veera Bhadra Swamy", party: "YCP" },
                    { name: "P.VenkataRamana", party: "JSP" },
                    { name: "S.Satish Kumar", party: "BJP" },
                    { name: "None of the Above", party: "NOTA" }
                ]
            },
            "Anantapur": {
    "Anantapur Urban": [
        { "name": "Anantha Venkatarami Reddy", "party": "YCP" },
        { "name": "V. Prabhakar Chowdary", "party": "TDP" },
        { "name": "S. Bhaskar", "party": "JSP" },
        { "name": "L. Swathi", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Tadipatri": [
        { "name": "Kethireddy Pedda Reddy", "party": "YCP" },
        { "name": "J.C. Pavan Reddy", "party": "TDP" },
        { "name": "B. Ravi", "party": "JSP" },
        { "name": "D. Laxmi", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Guntakal": [
        { "name": "Y. Venkatarama Reddy", "party": "YCP" },
        { "name": "Madhusudhan Gupta", "party": "TDP" },
        { "name": "R. Sandeep", "party": "JSP" },
        { "name": "P. Haritha", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Uravakonda": [
        { "name": "Payyavula Keshav", "party": "TDP" },
        { "name": "Y. Visweswara Reddy", "party": "YCP" },
        { "name": "K. Anji", "party": "JSP" },
        { "name": "N. Lavanya", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Hindupur": [
        { "name": "K. Balakrishna", "party": "TDP" },
        { "name": "G. Anjaneyulu", "party": "YCP" },
        { "name": "T. Sudheer", "party": "JSP" },
        { "name": "R. Meghana", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Kadiri": [
        { "name": "Dr. Pedaballi Venkata Sidda Reddy", "party": "YCP" },
        { "name": "S. Venkatesh", "party": "TDP" },
        { "name": "R. Laxman", "party": "JSP" },
        { "name": "A. Sireesha", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Rayadurg": [
        { "name": "Kapil Mohan Reddy", "party": "YCP" },
        { "name": "Thippeswamy", "party": "TDP" },
        { "name": "B. Mallikarjun", "party": "JSP" },
        { "name": "S. Yamini", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Kalyandurg": [
        { "name": "K. V. Ushashri Charan", "party": "YCP" },
        { "name": "T. Prasad Reddy", "party": "TDP" },
        { "name": "J. Raghava", "party": "JSP" },
        { "name": "V. Swarna", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ]
},
"Kadapa": {
    "Kadapa": [
        { "name": "Y. S. Jagan Mohan Reddy", "party": "YCP" },
        { "name": "N. Srinivasa Rao", "party": "TDP" },
        { "name": "P. Lakshmi", "party": "JSP" },
        { "name": "S. Kumar", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Proddatur": [
        { "name": "Y. S. Avinash Reddy", "party": "YCP" },
        { "name": "S. Prakash", "party": "TDP" },
        { "name": "B. Ramesh", "party": "JSP" },
        { "name": "T. Venkatesh", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Rajampet": [
        { "name": "M. S. Reddy", "party": "YCP" },
        { "name": "P. Radhakrishna", "party": "TDP" },
        { "name": "D. Srinivas", "party": "JSP" },
        { "name": "L. Prabhakar", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Jammalamadugu": [
        { "name": "A. P. Kumar", "party": "YCP" },
        { "name": "S. Rajendra Prasad", "party": "TDP" },
        { "name": "P. Chandra", "party": "JSP" },
        { "name": "K. Ramesh", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Badvel": [
        { "name": "R. Narayana Reddy", "party": "YCP" },
        { "name": "S. Subrahmanyam", "party": "TDP" },
        { "name": "K. Rani", "party": "JSP" },
        { "name": "M. Nandini", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Kamalapuram": [
        { "name": "P. Y. S. Reddy", "party": "YCP" },
        { "name": "B. Krishna", "party": "TDP" },
        { "name": "S. Nithin", "party": "JSP" },
        { "name": "D. Krishna Kumar", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Mydukur": [
        { "name": "V. Prakash", "party": "YCP" },
        { "name": "G. Lakshmi", "party": "TDP" },
        { "name": "N. Raghunath", "party": "JSP" },
        { "name": "M. D. Raju", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ]
},
"Kurnool": {
    "Kurnool": [
        { "name": "Y. S. Jagan Mohan Reddy", "party": "YCP" },
        { "name": "S. V. S. S. Reddy", "party": "TDP" },
        { "name": "B. Ramesh", "party": "JSP" },
        { "name": "R. Chandra", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Adoni": [
        { "name": "J. Krishna", "party": "YCP" },
        { "name": "M. Venkatesh", "party": "TDP" },
        { "name": "A. Raja", "party": "JSP" },
        { "name": "T. Swamy", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Nandyal": [
        { "name": "B. Srinivasa Reddy", "party": "YCP" },
        { "name": "K. Subba Reddy", "party": "TDP" },
        { "name": "D. Venkatesh", "party": "JSP" },
        { "name": "M. Ramesh", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Allagadda": [
        { "name": "Y. Raghunath", "party": "YCP" },
        { "name": "S. Reddy", "party": "TDP" },
        { "name": "K. Raju", "party": "JSP" },
        { "name": "S. V. Naidu", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Dhone": [
        { "name": "M. K. Reddy", "party": "YCP" },
        { "name": "B. Chandrasekhar", "party": "TDP" },
        { "name": "V. Ravi", "party": "JSP" },
        { "name": "P. Kumar", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Peddapalli": [
        { "name": "S. Suresh", "party": "YCP" },
        { "name": "R. Manohar", "party": "TDP" },
        { "name": "K. Rajender", "party": "JSP" },
        { "name": "B. Sudhakar", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Yemmiganur": [
        { "name": "T. K. Reddy", "party": "YCP" },
        { "name": "V. Raghavendra", "party": "TDP" },
        { "name": "A. Sudhakar", "party": "JSP" },
        { "name": "M. Naresh", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ]
},
"Nellore": {
    "Nellore": [
        { "name": "A. Raghurama Krishnam Raju", "party": "BJP" },
        { "name": "M. Anil Kumar", "party": "TDP" },
        { "name": "S. Chiranjeevi", "party": "YCP" },
        { "name": "K. Gopal", "party": "JSP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Udayagiri": [
        { "name": "P. Venkatesh", "party": "YCP" },
        { "name": "R. Venkata Rao", "party": "TDP" },
        { "name": "K. Raju", "party": "JSP" },
        { "name": "M. Sudhakar", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Sullurpet": [
        { "name": "G. Venkatesh", "party": "YCP" },
        { "name": "V. Srinivasa Rao", "party": "TDP" },
        { "name": "R. Kiran Kumar", "party": "JSP" },
        { "name": "M. Ramesh", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Atmakur": [
        { "name": "V. S. Reddy", "party": "YCP" },
        { "name": "P. Anil Kumar", "party": "TDP" },
        { "name": "S. Nageswar Rao", "party": "JSP" },
        { "name": "R. Kumar", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ],
    "Bogole": [
        { "name": "M. Chandra", "party": "YCP" },
        { "name": "T. Ramesh", "party": "TDP" },
        { "name": "K. Krishna", "party": "JSP" },
        { "name": "V. Siva Reddy", "party": "BJP" },
        { "name": "None of the Above", "party": "NOTA" }
    ]
}







        };

       

        let selectedMLAs = {};
    let currentConstituency = '';
    let currentDistrict = '';

    // Check if user has already voted
    async function hasVoted() {
        const res = await fetch('/has-voted');
        const data = await res.json();
        return data.hasVoted;
    }

    // Mark user as voted
    function setVoted() {
        // This will no longer use localStorage; the state will be controlled by the server.
        // We won't store the voted details in localStorage anymore.
    }

    // Disable voting interface
    function disableVoting() {
        const container = document.getElementById('voting-container');
        container.classList.add('disabled-voting');
        
        // Disable form elements except results button
        document.getElementById('district').disabled = true;
        document.getElementById('constituency').disabled = true;
        document.getElementById('vote-btn').disabled = true;
        
        // Disable MLA selection
        const mlaItems = document.querySelectorAll('.mla-item');
        mlaItems.forEach(item => {
            item.classList.add('disabled');
        });
        
        // Keep results button enabled
        document.getElementById('results-btn').style.pointerEvents = 'auto';
    }

    // Load constituencies based on selected district
    function loadConstituencies() {
        const districtSelect = document.getElementById('district');
        const constituencySelect = document.getElementById('constituency');
        
        currentDistrict = districtSelect.value;
        constituencySelect.innerHTML = '<option value="">-- Select Constituency --</option>';
        
        if (currentDistrict && mlaData[currentDistrict]) {
            Object.keys(mlaData[currentDistrict]).forEach(constituency => {
                const option = document.createElement('option');
                option.value = constituency;
                option.textContent = constituency;
                constituencySelect.appendChild(option);
            });
        }
        
        // Hide MLA list when district changes
        document.getElementById('mla-list').style.display = 'none';
    }

    // Load MLAs based on selected constituency
    function loadMLAs() {
        const districtSelect = document.getElementById('district');
        const constituencySelect = document.getElementById('constituency');
        const mlaList = document.getElementById('mla-list');
        const mlaGrid = document.getElementById('mla-grid');
        
        currentDistrict = districtSelect.value;
        currentConstituency = constituencySelect.value;
        
        if (currentDistrict && currentConstituency && mlaData[currentDistrict] && mlaData[currentDistrict][currentConstituency]) {
            showLoading(true);
            
            // Simulate API call delay
            setTimeout(() => {
                mlaGrid.innerHTML = '';
                
                mlaData[currentDistrict][currentConstituency].forEach((mla, index) => {
                    const mlaItem = document.createElement('div');
                    mlaItem.className = `mla-item party-${mla.party}`;
                    mlaItem.onclick = (event) => selectMLA(event, mla, currentDistrict, currentConstituency);
                    
                    mlaItem.innerHTML = `
                        <div class="mla-info">
                            <div class="party-symbol">
                                <img src="${partySymbols[mla.party]}" alt="${mla.party}">
                            </div>
                            <div class="mla-details">
                                <div class="mla-name">${mla.name}</div>
                                <div class="mla-party">${mla.party}</div>
                            </div>
                        </div>
                        <input type="radio" name="mla" value="${mla.name}">
                    `;
                    
                    mlaGrid.appendChild(mlaItem);
                });
                
                mlaList.style.display = 'block';
                showLoading(false);
            }, 800);
        } else {
            mlaList.style.display = 'none';
        }
    }

    // Select an MLA candidate
    function selectMLA(event, mla, district, constituency) {
        // Deselect all MLAs in this constituency
        const mlaItems = document.querySelectorAll('.mla-item');
        mlaItems.forEach(item => {
            item.classList.remove('selected');
        });
        
        // Select the clicked MLA
        event.currentTarget.classList.add('selected');
        
        // Store the selected MLA
        if (!selectedMLAs[district]) {
            selectedMLAs[district] = {};
        }
        selectedMLAs[district][constituency] = mla;
    }

    // Submit vote to the server
    function submitVote() {
        const district = document.getElementById('district').value;
        const constituency = document.getElementById('constituency').value;

        if (!district || !constituency) {
            showToast('Please select both district and constituency');
            return;
        }

        if (!selectedMLAs[district] || !selectedMLAs[district][constituency]) {
            showToast('Please select a candidate to vote');
            return;
        }

        const selectedMla = selectedMLAs[district][constituency];
        const successDetails = document.getElementById('success-details');

        successDetails.innerHTML = `
            Your vote has been recorded for <strong>${selectedMla.name}</strong> (${selectedMla.party}) 
            in <strong>${constituency}</strong> constituency of <strong>${district}</strong> district.
            <br><br>
            Thank you for participating in the democratic process.
        `;

        // Mark as voted and disable voting interface
        setVoted();
        disableVoting();

        // Show success message
        document.getElementById('voting-success').classList.add('show');

        // Send vote to the server using fetch API
        fetch('http://localhost:3000/submit-vote', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            credentials: 'include', // ✅ This enables sending cookies
            body: JSON.stringify({
                district: district,
                constituency: constituency,
                mlaName: selectedMla.name,
                party: selectedMla.party
            })
        })
        .then(response => {
            if (!response.ok) throw new Error('Network response was not ok');
            return response.json();
        })
        .then(data => {
            alert(data.message); // Should now say: "Vote submitted successfully"
        })
        .catch(error => {
            console.error('Error submitting vote:', error);
            alert('Error submitting vote. Please try again.');
        });
    }

    // Show loading indicator
    function showLoading(show) {
        const loading = document.getElementById('loading');
        if (show) {
            loading.classList.add('show');
        } else {
            loading.classList.remove('show');
        }
    }

    // Show toast notification
    function showToast(message) {
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        
        toastMessage.textContent = message;
        toast.classList.add('show');
        
        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    }

    // Close success message
    function closeSuccessMessage() {
        document.getElementById('voting-success').classList.remove('show');
    }

    // Show results modal
    function showResults() {
        const district = document.getElementById('district').value;
        const constituency = document.getElementById('constituency').value;
        const resultsContainer = document.getElementById('results-container');

        if (!district || !constituency) {
            showToast('Please select both district and constituency to view results');
            return;
        }

        showLoading(true);

        fetch(`http://localhost:3000/get-results?district=${district}&constituency=${constituency}`)
            .then(res => {
                showLoading(false);
                if (!res.ok) {
                    throw new Error("No results found or server error");
                }
                return res.json();
            })
            .then(results => {
                let html = `
                    <h4>Results for ${constituency} Constituency</h4>
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>Candidate</th>
                                <th>Party</th>
                                <th>Votes</th>
                            </tr>
                        </thead>
                        <tbody>
                `;

                results.forEach(candidate => {
                    const partyClass =` badge-${candidate.party.toLowerCase()}`;
                    html += `
                        <tr>
                            <td>${candidate.name}</td>
                            <td><span class="party-badge ${partyClass}">${candidate.party}</span></td>
                            <td>${candidate.votes.toLocaleString()}</td>
                        </tr>
                    `;
                });

                html += `
                        </tbody>
                    </table>
                `;

                resultsContainer.innerHTML = html;
                document.getElementById('results-modal').classList.add('show');
            })
            .catch(err => {
                showLoading(false);
                resultsContainer.innerHTML = `<p>No results found for ${constituency}. Please check back later.</p>`;
                document.getElementById('results-modal').classList.add('show');
                console.error(err);
            });
    }

    // Close results modal
    function closeResults() {
        document.getElementById('results-modal').classList.remove('show');
    }

    // Initialize the page
    document.addEventListener('DOMContentLoaded', () => {
        // Check if user has already voted
        hasVoted()
            .then(data => {
                if (data) {
                    disableVoting();
                }
            })
            .catch(err => {
                console.error('Error checking vote status:', err);
            });
        
        // Animate status indicator after a delay
        setTimeout(() => {
            document.querySelector('.status-dot').style.animation = 'pulse 1.5s infinite';
        }, 1500);
    });
    </script>
</body>
</html>